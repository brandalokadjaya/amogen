<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Input Teks dan Konversi ke Gambar</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #000000; /* Latar belakang hitam */
            color: white;
            margin: 0;
            box-sizing: border-box;
        }
        .input-container {
            max-width: 90%; /* Agar konten lebih fleksibel menyesuaikan layar */
            margin: 0 auto;
            text-align: center;
            width: 500px; /* Batasi lebar maksimal */
        }
        .text-box {
            width: 100%;
            height: 150px;
            font-family: sans-serif; /* Ganti dengan font standar yang lebih ringan */
            font-weight: normal; /* Mengurangi berat font */
            font-size: 5vw; /* Ukuran font dinamis berdasarkan lebar layar */
            padding: 10px;
            border: 2px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            background-color: #222222;
            color: white;
            margin-top: 20px;
            resize: none;
        }
        #fontSizeSlider {
            margin-top: 20px;
            width: 100%;
        }
        #downloadButton {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
        }
        #downloadButton:hover {
            background-color: #45a049;
        }
        #preview {
            margin-top: 20px;
            border: 1px solid #ccc;
            width: 100%;
            max-width: 100%;
            display: block;
            margin-bottom: 10px;
        }
        canvas {
            display: none;
        }

        /* Responsif untuk layar kecil */
        @media screen and (max-width: 600px) {
            .text-box {
                font-size: 6vw; /* Menyesuaikan font di layar kecil */
                height: 120px; /* Menurunkan tinggi pada layar kecil */
            }
            #downloadButton {
                font-size: 14px;
            }
        }

        @media screen and (max-width: 400px) {
            .input-container {
                max-width: 90%; /* Menyesuaikan konten dengan layar lebih kecil */
            }
            #fontSizeSlider {
                width: 90%; /* Menyesuaikan lebar slider */
            }
        }
    </style>
</head>
<body>

    <div class="input-container">
        <img id="preview" alt="Pratinjau Gambar">
        <textarea class="text-box" id="textInput" placeholder="Tulis kata-katamu di sini dan nanti akan otomatis menjadi gambar yang tinggal di tempelkan ke vidiomu..." oninput="generateImage()"></textarea>
        <input type="range" id="fontSizeSlider" min="50" max="150" value="100" oninput="generateImage()">
        <button id="downloadButton" onclick="downloadImage()">Download PNG</button>
    </div>
    <canvas id="canvas" width="1080" height="1920"></canvas>

    <script>
        // Fungsi untuk membuat gambar PNG dari teks dengan latar belakang transparan dan menampilkan pratinjau
        function generateImage() {
            const canvas = document.getElementById('canvas');
            const context = canvas.getContext('2d');
            const fontSize = document.getElementById('fontSizeSlider').value;

            // Menghapus latar belakang dengan warna transparan
            context.clearRect(0, 0, canvas.width, canvas.height);

            // Mengatur teks
            const text = document.getElementById('textInput').value;
            context.fillStyle = '#ffffff'; // Warna teks putih
            context.font = `bold ${fontSize}px sans-serif`; // Ganti ke sans-serif
            context.textAlign = 'center';
            context.textBaseline = 'middle';

            // Membagi teks menjadi baris jika terlalu panjang
            const maxWidth = canvas.width - 100; // Mengurangi margin
            const lineHeight = parseInt(fontSize) + 20;
            const lines = wrapText(context, text, maxWidth);

            // Menampilkan teks pada canvas
            const yStart = canvas.height / 2 - (lines.length / 2) * lineHeight;
            lines.forEach((line, i) => {
                context.fillText(line, canvas.width / 2, yStart + i * lineHeight);
            });

            // Menampilkan pratinjau gambar
            const preview = document.getElementById('preview');
            preview.src = canvas.toDataURL('image/png');
        }

        // Fungsi untuk mengunduh gambar
        function downloadImage() {
            const canvas = document.getElementById('canvas');
            const link = document.createElement('a');
            link.download = 'Quote [amoogenz].png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        // Fungsi untuk membungkus teks menjadi beberapa baris
        function wrapText(context, text, maxWidth) {
            const words = text.split(' ');
            const lines = [];
            let line = '';

            for (let i = 0; i < words.length; i++) {
                const testLine = line + words[i] + ' ';
                const metrics = context.measureText(testLine);
                const testWidth = metrics.width;
                if (testWidth > maxWidth && i > 0) {
                    lines.push(line);
                    line = words[i] + ' ';
                } else {
                    line = testLine;
                }
            }
            lines.push(line);
            return lines;
        }
    </script>

</body>
</html>
